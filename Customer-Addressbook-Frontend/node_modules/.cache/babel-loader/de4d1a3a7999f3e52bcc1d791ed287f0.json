{"remainingRequest":"C:\\Projects\\customer-addressbook-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Projects\\customer-addressbook-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Projects\\customer-addressbook-frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Projects\\customer-addressbook-frontend\\src\\components\\CustomerList.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Projects\\customer-addressbook-frontend\\src\\components\\CustomerList.vue","mtime":1631339400323},{"path":"C:\\Projects\\customer-addressbook-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Projects\\customer-addressbook-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Projects\\customer-addressbook-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Projects\\customer-addressbook-frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0IHsgRmlsdGVyTWF0Y2hNb2RlIH0gZnJvbSAicHJpbWV2dWUvYXBpIjsKaW1wb3J0IEN1c3RvbWVyIGZyb20gIi4uLy4uL3NyYy9hcGlzL0N1c3RvbWVycyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VzdG9tZXJzOiBbXSwKICAgICAgY3VzdG9tZXJEaWFsb2c6IGZhbHNlLAogICAgICBkZWxldGVDdXN0b21lckRpYWxvZzogZmFsc2UsCiAgICAgIGN1c3RvbWVyOiB7fSwKICAgICAgc2VsZWN0ZWRDdXN0b21lcnM6IG51bGwsCiAgICAgIGZpbHRlcnM6IHt9LAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdEZpbHRlcnMoKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIEN1c3RvbWVyLmdldEN1c3RvbWVycygpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgY29uc29sZS5sb2cocmVzcC5kYXRhLmRhdGEpOwogICAgICBfdGhpcy5jdXN0b21lcnMgPSByZXNwLmRhdGEuZGF0YTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgaGlkZURpYWxvZzogZnVuY3Rpb24gaGlkZURpYWxvZygpIHsKICAgICAgdGhpcy5jdXN0b21lckRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOwogICAgfSwKICAgIGNvbmZpcm1EZWxldGVDdXN0b21lcjogZnVuY3Rpb24gY29uZmlybURlbGV0ZUN1c3RvbWVyKGN1c3RvbWVyKSB7CiAgICAgIHRoaXMuY3VzdG9tZXIgPSBjdXN0b21lcjsKICAgICAgdGhpcy5kZWxldGVDdXN0b21lckRpYWxvZyA9IHRydWU7CiAgICB9LAogICAgZGVsZXRlQ3VzdG9tZXI6IGZ1bmN0aW9uIGRlbGV0ZUN1c3RvbWVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuY3VzdG9tZXJzID0gdGhpcy5jdXN0b21lcnMuZmlsdGVyKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICByZXR1cm4gdmFsLmlkICE9PSBfdGhpczIuY3VzdG9tZXIuaWQ7CiAgICAgIH0pOwogICAgICB2YXIgY3VzdG9tZXJfaWQgPSBwYXJzZUludCh0aGlzLmN1c3RvbWVyLmlkKTsKICAgICAgdGhpcy5kZWxldGVDdXN0b21lckRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmN1c3RvbWVyID0ge307CiAgICAgIEN1c3RvbWVyLmRlbGV0ZUN1c3RvbWVyKGN1c3RvbWVyX2lkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcCk7CgogICAgICAgIGlmIChyZXNwLmRhdGEgPT0gIkN1c3RvbWVyIERlbGV0ZWQgU3VjY2Vzc2Z1bGx5ISIpIHsKICAgICAgICAgIF90aGlzMi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgc2V2ZXJpdHk6ICJzdWNjZXNzIiwKICAgICAgICAgICAgc3VtbWFyeTogIlN1Y2Nlc3NmdWwiLAogICAgICAgICAgICBkZXRhaWw6ICJDdXN0b21lciBEZWxldGVkIiwKICAgICAgICAgICAgbGlmZTogMzAwMAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kdG9hc3QuYWRkKHsKICAgICAgICAgICAgc2V2ZXJpdHk6ICJlcnJvciIsCiAgICAgICAgICAgIHN1bW1hcnk6ICJFcnJvciBNZXNzYWdlIiwKICAgICAgICAgICAgZGV0YWlsOiByZXNwLmRhdGEsCiAgICAgICAgICAgIGxpZmU6IDMwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY29uZmlybURlbGV0ZVNlbGVjdGVkOiBmdW5jdGlvbiBjb25maXJtRGVsZXRlU2VsZWN0ZWQoKSB7CiAgICAgIHRoaXMuZGVsZXRlQ3VzdG9tZXJzRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBpbml0RmlsdGVyczogZnVuY3Rpb24gaW5pdEZpbHRlcnMoKSB7CiAgICAgIHRoaXMuZmlsdGVycyA9IHsKICAgICAgICBnbG9iYWw6IHsKICAgICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgICAgbWF0Y2hNb2RlOiBGaWx0ZXJNYXRjaE1vZGUuQ09OVEFJTlMKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Projects\\customer-addressbook-frontend\\src\\components\\CustomerList.vue"],"names":[],"mappings":";AAmHA,SAAS,eAAT,QAAgC,cAAhC;AACA,OAAO,QAAP,MAAqB,0BAArB;AAEA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,SAAS,EAAE,EADN;AAEL,MAAA,cAAc,EAAE,KAFX;AAGL,MAAA,oBAAoB,EAAE,KAHjB;AAIL,MAAA,QAAQ,EAAE,EAJL;AAKL,MAAA,iBAAiB,EAAE,IALd;AAML,MAAA,OAAO,EAAE,EANJ;AAOL,MAAA,SAAS,EAAE;AAPN,KAAP;AASD,GAXY;AAYb,EAAA,OAZa,qBAYH;AACR,SAAK,WAAL;AACD,GAdY;AAeb,EAAA,OAfa,qBAeH;AAAA;;AACR,IAAA,QAAQ,CAAC,YAAT,GAAwB,IAAxB,CAA6B,UAAC,IAAD,EAAU;AACrC,MAAA,OAAO,CAAC,GAAR,CAAY,IAAI,CAAC,IAAL,CAAU,IAAtB;AACA,MAAA,KAAI,CAAC,SAAL,GAAiB,IAAI,CAAC,IAAL,CAAU,IAA3B;AACD,KAHD;AAID,GApBY;AAqBb,EAAA,OAAO,EAAE;AACP,IAAA,UADO,wBACM;AACX,WAAK,cAAL,GAAsB,KAAtB;AACA,WAAK,SAAL,GAAiB,KAAjB;AACD,KAJM;AAKP,IAAA,qBALO,iCAKe,QALf,EAKyB;AAC9B,WAAK,QAAL,GAAgB,QAAhB;AACA,WAAK,oBAAL,GAA4B,IAA5B;AACD,KARM;AASP,IAAA,cATO,4BASU;AAAA;;AACf,WAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,MAAf,CACf,UAAC,GAAD;AAAA,eAAS,GAAG,CAAC,EAAJ,KAAW,MAAI,CAAC,QAAL,CAAc,EAAlC;AAAA,OADe,CAAjB;AAGA,UAAI,WAAU,GAAI,QAAQ,CAAC,KAAK,QAAL,CAAc,EAAf,CAA1B;AACA,WAAK,oBAAL,GAA4B,KAA5B;AACA,WAAK,QAAL,GAAgB,EAAhB;AACA,MAAA,QAAQ,CAAC,cAAT,CAAwB,WAAxB,EAAqC,IAArC,CAA0C,UAAC,IAAD,EAAU;AAClD,QAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;;AACA,YAAI,IAAI,CAAC,IAAL,IAAa,gCAAjB,EAAmD;AACjD,UAAA,MAAI,CAAC,MAAL,CAAY,GAAZ,CAAgB;AACd,YAAA,QAAQ,EAAE,SADI;AAEd,YAAA,OAAO,EAAE,YAFK;AAGd,YAAA,MAAM,EAAE,kBAHM;AAId,YAAA,IAAI,EAAE;AAJQ,WAAhB;AAMF,SAPA,MAOO;AACL,UAAA,MAAI,CAAC,MAAL,CAAY,GAAZ,CAAgB;AACd,YAAA,QAAQ,EAAE,OADI;AAEd,YAAA,OAAO,EAAE,eAFK;AAGd,YAAA,MAAM,EAAE,IAAI,CAAC,IAHC;AAId,YAAA,IAAI,EAAE;AAJQ,WAAhB;AAMF;AACD,OAjBD;AAkBD,KAlCM;AAmCP,IAAA,qBAnCO,mCAmCiB;AACtB,WAAK,qBAAL,GAA6B,IAA7B;AACD,KArCM;AAsCP,IAAA,WAtCO,yBAsCO;AACZ,WAAK,OAAL,GAAe;AACb,QAAA,MAAM,EAAE;AAAE,UAAA,KAAK,EAAE,IAAT;AAAe,UAAA,SAAS,EAAE,eAAe,CAAC;AAA1C;AADK,OAAf;AAGD;AA1CM;AArBI,CAAf","sourcesContent":["<template>\n  <Toast position=\"top-left\" />\n  <div class=\"p-m-5\">\n    <div class=\"card\">\n      <DataTable\n        ref=\"dt\"\n        :value=\"customers\"\n        v-model:selection=\"selectedCustomers\"\n        dataKey=\"id\"\n        :paginator=\"true\"\n        :rows=\"10\"\n        :filters=\"filters\"\n        paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\n        :rowsPerPageOptions=\"[5, 10, 25]\"\n        currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} customers\"\n        responsiveLayout=\"scroll\"\n      >\n        <template #header>\n          <div\n            class=\"\n              table-header\n              p-d-flex p-flex-column p-flex-md-row p-jc-md-between\n            \"\n          >\n            <h3 class=\"p-mb-2 p-m-md-0 p-as-md-center\">Customer List</h3>\n            <span class=\"p-input-icon-left\">\n              <i class=\"pi pi-search\" />\n              <InputText\n                v-model=\"filters['global'].value\"\n                placeholder=\"Search...\"\n              />\n            </span>\n          </div>\n        </template>\n\n        <Column\n          field=\"name\"\n          header=\"Name\"\n          :sortable=\"true\"\n          style=\"min-width: 12rem\"\n        ></Column>\n        <Column\n          field=\"nic\"\n          header=\"NIC\"\n          :sortable=\"true\"\n          style=\"min-width: 16rem\"\n        ></Column>\n        <Column\n          field=\"address\"\n          header=\"Address\"\n          filterField=\"address.address\"\n          style=\"min-width: 8rem\"\n        >\n          <template #body=\"slotProps\">\n            <span>{{ slotProps.data.address.address }}</span>\n          </template>\n        </Column>\n        <Column\n          field=\"telephones\"\n          header=\"Telephones\"\n          filterField=\"telephone.telephone.telephone\"\n          style=\"min-width: 10rem\"\n        >\n          <template #body=\"slotProps\">\n            <span\n              v-for=\"telephone of slotProps.data.telephones\"\n              :key=\"telephone.id\"\n              >{{ telephone.telephone }}<br\n            /></span>\n          </template>\n        </Column>\n        <Column :exportable=\"false\" header=\"Actions\">\n          <template #body=\"slotProps\">\n            <Button\n              icon=\"pi pi-trash\"\n              class=\"p-button-rounded p-button-warning\"\n              @click=\"confirmDeleteCustomer(slotProps.data)\"\n            />\n          </template>\n        </Column>\n      </DataTable>\n    </div>\n\n    <Dialog\n      v-model:visible=\"deleteCustomerDialog\"\n      :style=\"{ width: '450px' }\"\n      header=\"Confirm\"\n      :modal=\"true\"\n    >\n      <div class=\"confirmation-content\">\n        <i class=\"pi pi-exclamation-triangle p-mr-3\" style=\"font-size: 2rem\" />\n        <span v-if=\"customer\"\n          >Are you sure you want to delete <b>{{ customer.name }}</b\n          >?</span\n        >\n      </div>\n      <template #footer>\n        <Button\n          label=\"No\"\n          icon=\"pi pi-times\"\n          class=\"p-button-text\"\n          @click=\"deleteCustomerDialog = false\"\n        />\n        <Button\n          label=\"Yes\"\n          icon=\"pi pi-check\"\n          class=\"p-button-text\"\n          @click=\"deleteCustomer\"\n        />\n      </template>\n    </Dialog>\n  </div>\n</template>\n\n<script>\nimport { FilterMatchMode } from \"primevue/api\";\nimport Customer from \"../../src/apis/Customers\";\n\nexport default {\n  data() {\n    return {\n      customers: [],\n      customerDialog: false,\n      deleteCustomerDialog: false,\n      customer: {},\n      selectedCustomers: null,\n      filters: {},\n      submitted: false,\n    };\n  },\n  created() {\n    this.initFilters();\n  },\n  mounted() {\n    Customer.getCustomers().then((resp) => {\n      console.log(resp.data.data);\n      this.customers = resp.data.data;\n    });\n  },\n  methods: {\n    hideDialog() {\n      this.customerDialog = false;\n      this.submitted = false;\n    },\n    confirmDeleteCustomer(customer) {\n      this.customer = customer;\n      this.deleteCustomerDialog = true;\n    },\n    deleteCustomer() {\n      this.customers = this.customers.filter(\n        (val) => val.id !== this.customer.id\n      );\n      let customer_id = parseInt(this.customer.id);\n      this.deleteCustomerDialog = false;\n      this.customer = {};\n      Customer.deleteCustomer(customer_id).then((resp) => {\n        console.log(resp);\n        if (resp.data == \"Customer Deleted Successfully!\") {\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Successful\",\n            detail: \"Customer Deleted\",\n            life: 3000,\n          });\n        } else {\n          this.$toast.add({\n            severity: \"error\",\n            summary: \"Error Message\",\n            detail: resp.data,\n            life: 3000,\n          });\n        }\n      });\n    },\n    confirmDeleteSelected() {\n      this.deleteCustomersDialog = true;\n    },\n    initFilters() {\n      this.filters = {\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\n      };\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.table-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  @media screen and (max-width: 960px) {\n    align-items: start;\n  }\n}\n.confirmation-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n@media screen and (max-width: 960px) {\n  ::v-deep(.p-toolbar) {\n    flex-wrap: wrap;\n\n    .p-button {\n      margin-bottom: 0.25rem;\n    }\n  }\n}\n</style>"],"sourceRoot":""}]}